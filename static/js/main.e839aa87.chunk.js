(this.webpackJsonpsocial=this.webpackJsonpsocial||[]).push([[0],{124:function(t,e,n){"use strict";n.d(e,"b",(function(){return i}));var r=n(34),c=n(5),a="SEND-MESSAGE",u={dialogs:[{id:1,name:"Ivan"},{id:2,name:"Dima"},{id:3,name:"Valera"}],messages:[{id:1,message:"Hi"},{id:2,message:"Hi2"},{id:3,message:"Hi3"}]},i=function(t){return{type:a,newMessageBody:t}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a:var n=e.newMessageBody;return Object(c.a)(Object(c.a)({},t),{},{messages:[].concat(Object(r.a)(t.messages),[{id:4,message:n}])});default:return t}}},127:function(t,e,n){"use strict";n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return w})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return C})),n.d(e,"f",(function(){return E}));var r=n(10),c=n.n(r),a=n(18),u=n(34),i=n(5),o=n(16),s=function(t,e,n,r){return t.map((function(t){return t[n]===e?Object(i.a)(Object(i.a)({},t),r):t}))},l="FOLLOW",f="UNFOLLOW",d="SET-USERS",j="SET-CURRENT-PAGE",b="setTotalUsersCountAC",p="TOGGLE-IS-FETCHING",O="TOGGLE-IS-FOLLOWING-PROGRESS",h={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},v=function(t){return{type:l,userId:t}},g=function(t){return{type:f,userId:t}},m=function(t){return{type:j,currentPage:t}},x=function(t){return{type:p,isFetching:t}},w=function(t,e){return{type:O,isFetching:t,userId:e}},y=function(t,e){return function(){var n=Object(a.a)(c.a.mark((function n(r){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(x(!0)),r(m(t)),n.next=4,o.c.getUsers(t,e);case 4:a=n.sent,r(x(!1)),r((u=a.items,{type:d,users:u})),r((c=a.totalCount,{type:b,totalCount:c}));case 8:case"end":return n.stop()}var c,u}),n)})));return function(t){return n.apply(this,arguments)}}()},S=function(){var t=Object(a.a)(c.a.mark((function t(e,n,r,a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(w(!0,n)),t.next=3,r(n);case 3:0===t.sent.data.resultCode&&e(a(n)),e(w(!1,n));case 6:case"end":return t.stop()}}),t)})));return function(e,n,r,c){return t.apply(this,arguments)}}(),C=function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(n,t,o.c.follow.bind(o.c),v);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(n,t,o.c.unfollow.bind(o.c),g);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(i.a)(Object(i.a)({},t),{},{users:s(t.users,e.userId,"id",{followed:!0})});case f:return Object(i.a)(Object(i.a)({},t),{},{users:s(t.users,e.userId,"id",{followed:!1})});case d:return Object(i.a)(Object(i.a)({},t),{},{users:e.users});case j:return Object(i.a)(Object(i.a)({},t),{},{currentPage:e.currentPage});case b:return Object(i.a)(Object(i.a)({},t),{},{totalUsersCount:e.totalCount});case p:return Object(i.a)(Object(i.a)({},t),{},{isFetching:e.isFetching});case O:return Object(i.a)(Object(i.a)({},t),{},{followingInProgress:e.isFetching?[].concat(Object(u.a)(t.followingInProgress),[e.userId]):t.followingInProgress.filter((function(t){return t!==e.userId}))});default:return t}}},16:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return i}));var r=n(130),c=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"905625c2-a62b-4415-a7ee-9977ec9c9786"}}),a={getUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return c.get("users?page=".concat(t,"&count=").concat(e)).then((function(t){return t.data}))},follow:function(t){return c.post("follow/".concat(t))},unfollow:function(t){return c.delete("follow/".concat(t))},getProfile:function(t){return u.getProfile(t)}},u={getProfile:function(t){return c.get("profile/"+t)},getStatus:function(t){return c.get("profile/status/"+t)},updateStatus:function(t){return c.put("profile/status",{status:t})}},i={me:function(){return c.get("auth/me",{withCredentials:!0})},login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return c.post("auth/login",{email:t,password:e,rememberMe:n})},logout:function(){return c.delete("auth/login")}}},164:function(t,e,n){},165:function(t,e,n){},294:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(66),u=n.n(a),i=(n(164),n(51)),o=n(52),s=n(54),l=n(53),f=n(9),d=(n(165),n(5)),j=n(24),b=n(88),p=n.n(b),O=n(2),h=function(t){return Object(O.jsx)("header",{className:p.a.header,children:Object(O.jsx)("div",{className:p.a.loginBlock,children:t.isAuth?Object(O.jsxs)("div",{children:[t.login," - ",Object(O.jsx)("button",{onClick:t.logout,children:"Log Out"})]}):Object(O.jsx)(j.b,{to:"/login",children:"Login"})})})},v=n(20),g=n(10),m=n.n(g),x=n(18),w=n(38),y=n(16),S="SET_USER_DATA",C={userId:null,login:null,email:null,isAuth:!1},E=function(t,e,n,r){return{type:S,payload:{userId:t,email:e,login:n,isAuth:r}}},P=function(){return function(){var t=Object(x.a)(m.a.mark((function t(e){var n,r,c,a,u;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.me();case 2:0===(n=t.sent).data.resultCode&&(r=n.data.data,c=r.id,a=r.email,u=r.login,e(E(c,a,u,!0)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case S:return Object(d.a)(Object(d.a)({},t),e.payload);default:return t}},k=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsx)(h,Object(d.a)({},this.props))}}]),n}(c.a.Component),_=Object(v.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login}}),{logout:function(){return function(){var t=Object(x.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.logout();case 2:0===t.sent.data.resultCode&&e(E(null,null,null,!1));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(k),T=n(125),A=n(32),N=n(83),L=n(133),F=n(46),R=n.n(F),U=Object(T.a)({form:"login"})((function(t){var e=t.handleSubmit,n=t.error;return Object(O.jsx)("div",{children:Object(O.jsxs)("form",{onSubmit:e,children:[Object(A.c)("Email","email",[N.b],A.a),Object(A.c)("Password","password",[N.b],A.a,{type:"password"}),Object(A.c)(null,"rememberMe",null,A.a,{type:"checkbox"},"remember me"),n&&Object(O.jsx)("div",{className:R.a.formSummaryError,children:n}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"login"})})]})})})),z=Object(v.b)((function(t){return{isAuth:t.auth.isAuth}}),{login:function(t,e,n){return function(){var r=Object(x.a)(m.a.mark((function r(c){var a,u;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.a.login(t,e,n);case 2:0===(a=r.sent).data.resultCode?c(P()):(u=a.data.messages.lenght>0?a.data.messages[0]:"Some error",c(Object(w.a)("login",{_error:u})));case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}})((function(t){return t.isAuth?Object(O.jsx)(L.Redirect,{to:"/profile"}):Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Login"}),Object(O.jsx)(U,{onSubmit:function(e){t.login(e.email,e.password,e.rememberMe)}})]})})),G=n(50),M=n.n(G),D=function(){return Object(O.jsx)("div",{className:M.a.navbar,children:Object(O.jsxs)("nav",{children:[Object(O.jsx)(j.b,{to:"/profile",activeClassName:M.a.active,children:"Profile"}),Object(O.jsx)(j.b,{to:"/dialogs",activeClassName:M.a.active,children:"Messages"}),Object(O.jsx)(j.b,{to:"/users",activeClassName:M.a.active,children:"Users"})]})})},B="INITIALIZED_SUCCESS",H={initialized:!1},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case B:return Object(d.a)(Object(d.a)({},t),{},{initialized:!0});default:return t}},q=n(11),J=n(65),Z=n(92),K=n(124),V={sidebar:{}},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return t},Q=n(127),X=n(134),$=n(126),tt=Object(q.c)({profilePage:Z.b,dialogsPage:K.a,sidebar:Y,usersPage:Q.a,auth:I,form:$.a,app:W}),et=Object(q.e)(tt,Object(q.a)(X.a)),nt=function(t){return Object(O.jsx)(r.Suspense,{fallback:Object(O.jsx)(J.a,{}),children:t.component})},rt=c.a.lazy((function(){return n.e(5).then(n.bind(null,305))})),ct=c.a.lazy((function(){return n.e(3).then(n.bind(null,304))})),at=c.a.lazy((function(){return n.e(4).then(n.bind(null,303))})),ut=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(_,{}),Object(O.jsxs)("div",{className:"main-content",children:[Object(O.jsx)(D,{}),Object(O.jsx)(f.Route,{path:"/profile/:userId?",render:function(){return Object(O.jsx)(nt,{component:Object(O.jsx)(ct,{})})}}),Object(O.jsx)(f.Route,{path:"/dialogs",render:function(){return Object(O.jsx)(nt,{component:Object(O.jsx)(rt,{})})}}),Object(O.jsx)(f.Route,{path:"/users",render:function(){return Object(O.jsx)(nt,{component:Object(O.jsx)(at,{})})}}),Object(O.jsx)(f.Route,{path:"/login",render:function(){return Object(O.jsx)(z,{})}})]})]}):Object(O.jsx)(J.a,{})}}]),n}(r.Component),it=Object(q.d)(f.withRouter,Object(v.b)((function(t){return{initialized:t.app.initialized}}),{initializeApp:function(){return function(t){var e=t(P());Promise.all([e]).then((function(){t({type:B})}))}}}))(ut),ot=function(t){return Object(O.jsx)(j.a,{children:Object(O.jsx)(v.a,{store:et,children:Object(O.jsx)(it,{})})})};u.a.render(Object(O.jsx)(ot,{}),document.getElementById("root"))},32:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return d}));var r=n(5),c=n(86),a=(n(0),n(46)),u=n.n(a),i=n(87),o=n(2),s=function(t){t.input;var e=t.meta,n=e.touched,r=e.error,c=t.children,a=n&&r;return Object(o.jsxs)("div",{className:u.a.formControl+""+(a?u.a.error:""),children:[Object(o.jsx)("div",{children:c}),a&&Object(o.jsx)("span",{children:r})]})},l=function(t){var e=t.input,n=(t.meta,t.child,Object(c.a)(t,["input","meta","child"]));return Object(o.jsx)(s,Object(r.a)(Object(r.a)({},t),{},{children:Object(o.jsx)("textarea",Object(r.a)(Object(r.a)({},e),n))}))},f=function(t){var e=t.input,n=(t.meta,t.child,Object(c.a)(t,["input","meta","child"]));return Object(o.jsx)(s,Object(r.a)(Object(r.a)({},t),{},{children:Object(o.jsx)("input",Object(r.a)(Object(r.a)({},e),n))}))},d=function(t,e,n,c){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(o.jsxs)("div",{children:[Object(o.jsx)(i.a,Object(r.a)({validate:n,placeholder:t,name:e,component:c},a))," ",u]})}},46:function(t,e,n){t.exports={formControl:"FormsControls_formControl__17IrT",error:"FormsControls_error__18hhP",formSummaryError:"FormsControls_formSummaryError__80l71"}},50:function(t,e,n){t.exports={navbar:"Navbar_navbar__1vZr8",active:"Navbar_active__2w5Sb"}},65:function(t,e,n){"use strict";n(0);var r=n.p+"static/media/preloader.5fe29c19.svg",c=n(2);e.a=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("img",{src:r})})}},83:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return c}));var r=function(t){if(!t)return"Filed is required"},c=function(t){return function(e){if(e.lenght>t)return"Max lenght is ".concat(t," symbols")}}},88:function(t,e,n){t.exports={loginBlock:"Header_loginBlock__14fLq"}},92:function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"d",(function(){return O})),n.d(e,"c",(function(){return h})),n.d(e,"e",(function(){return v}));var r=n(10),c=n.n(r),a=n(18),u=n(34),i=n(5),o=n(16),s="ADD-POST",l="SET-USER-PROFILE",f="SET_STATUS",d="DELETE_POST",j={post:[{id:1,post:"Hi, how are you?",likesCount:12},{id:2,post:"Second Post",likesCount:124}],profile:null,status:""},b=function(t){return{type:s,newPostText:t}},p=function(t){return{type:f,status:t}},O=function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.c.getProfile(t);case 2:r=e.sent,n((c=r.data,{type:l,profile:c}));case 4:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.getStatus(t);case 2:r=e.sent,n(p(r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.updateStatus(t);case 2:0===e.sent.data.resultCode&&n(p(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case s:var n={id:3,post:e.newPostText,likesCount:0};return Object(i.a)(Object(i.a)({},t),{},{post:[].concat(Object(u.a)(t.post),[n]),newPostText:""});case l:return Object(i.a)(Object(i.a)({},t),{},{profile:e.profile});case f:return Object(i.a)(Object(i.a)({},t),{},{status:e.status});case d:return Object(i.a)(Object(i.a)({},t),{},{post:t.post.filter((function(t){return t.id!==e.postId}))});default:return t}}}},[[294,1,2]]]);
//# sourceMappingURL=main.e839aa87.chunk.js.map